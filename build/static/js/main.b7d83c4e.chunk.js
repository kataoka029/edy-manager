(this["webpackJsonpedy-manager"]=this["webpackJsonpedy-manager"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),s=n.n(r),u=n(3),l=(n(62),function(){return c.a.createElement("header",null,c.a.createElement("h1",{className:"title"},"EDY MANAGER"),c.a.createElement("nav",null,c.a.createElement("ul",{className:"menu"},c.a.createElement("li",null,"XXXX"),c.a.createElement("li",null,"XXXX"),c.a.createElement("li",null,"XXXX"),c.a.createElement("li",null,"XXXX"))))}),o=(n(63),n(64),n(19)),i=function(e){return c.a.createElement("div",{className:e.selected?"user selected":"user","data-user-id":e.userId},c.a.createElement(o.b,{to:e.link},c.a.createElement("div",{className:"user-id"},e.userId>0?e.userId:"-"),c.a.createElement("div",{className:"text"},e.userText),c.a.createElement("div",{className:"line-user-id"},e.lineUserId)))},m=(n(66),n(12)),f=n.n(m),E=n(20),d={url:"https://edy-bot.herokuapp.com/"},p=d,g=p.url,h=function(e){fetch("".concat(g,"api/users/")).then((function(e){return e.json()})).then((function(t){e({type:"SET_USERS",users:t})})).then((function(){return console.log("ERROR/ fetchMessages()/ ")})).catch((function(e){return console.log(e)}))},b=function(e,t){fetch("".concat(g,"api/messages/").concat(t)).then((function(e){return e.json()})).then((function(t){e({type:"SET_MESSAGES",messages:t})})).then((function(){return console.log("SUCCESS/ fetchMessages()/ ")})).catch((function(e){return console.log("ERROR/ fetchMessages()/ ",e)}))},O=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"api/messages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(){return console.log("SUCCESS/ insertMessage()/ ")})).catch((function(e){return console.log("ERROR/ insertMessage()/ ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e,t){fetch("".concat(g,"api/messages/").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(){return console.log("SUCCESS/ sendMessage()/ ")})).catch((function(e){return console.log("ERROR/ sendMessage()/ ",e)}))},j=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.users})),n=Object(u.c)((function(e){return e.lineUserId}));return Object(a.useEffect)((function(){h(e)}),[]),c.a.createElement("div",{className:"left-column"},t.map((function(e,t){return c.a.createElement(i,{link:"/messages/".concat(e.lineUserId),lineUserId:e.lineUserId,userId:e.userId,userText:e.userText,selected:n===e.lineUserId,key:"user".concat(t)})})))},N=(n(68),n(69),function(e){var t="user"===e.message.line_user_type?"left-message":"right-message";return c.a.createElement("div",{className:"message ".concat(t)},e.message.line_message_text)}),v=(n(70),n(50)),y=n.n(v).a.connect(p.url),I=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.messages})),n=Object(u.c)((function(e){return e.lineUserId}));return Object(a.useEffect)((function(){b(e,n)}),[n]),Object(a.useEffect)((function(){return y.on("refetch",(function(t){console.log("UID: ".concat(t.event.source.userId)),b(e,n),h(e)})),function(){y.off("refetch")}}),[n]),t.map((function(e,t){return c.a.createElement(N,{message:e,key:"message".concat(t)})}))},U=(n(102),function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.input})),n=Object(u.c)((function(e){return e.lineUserId})),a=function(){var a=Object(E.a)(f.a.mark((function a(){var c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(c=[])[0]={type:"message",replyToken:"_",source:{userId:n,type:"edy"},message:{id:"_",type:"text",text:t}},a.next=4,O(c);case 4:h(e),b(e,n),S(c,n);case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return c.a.createElement("div",{className:"edy-input"},c.a.createElement("div",{className:"menu-bar"},c.a.createElement("a",{className:"mood"},c.a.createElement("span",{className:"material-icons"},"mood")),c.a.createElement("a",{className:"attachment"},c.a.createElement("span",{className:"material-icons"},"attachment")),c.a.createElement("a",{className:"reply"},c.a.createElement("span",{className:"material-icons",onClick:a},"reply"))),c.a.createElement("textarea",{className:"text",placeholder:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b",onChange:function(t){return e({type:"HANDLE_INPUT",input:t.target.value})}}))}),R=function(){return c.a.createElement("div",{className:"center-column"},c.a.createElement("div",{className:"messages"},c.a.createElement(I,null)),c.a.createElement(U,null))},x=(n(103),n(51)),T=n.n(x),X=function(){return c.a.createElement("div",{className:"right-column"},c.a.createElement("section",{className:"under-construction"},c.a.createElement("p",null,"\u30e6\u30fc\u30b6\u30fc\u306e\u8a73\u7d30\u3092\u8868\u793a\u3055\u305b\u305f\u304f\u3001\u3053\u308c\u304b\u3089\u9811\u5f35\u3063\u3066\u4f5c\u308a\u307e\u3059\u3002"),c.a.createElement("img",{src:T.a,alt:"pandRight"})))},_=function(e){var t=Object(u.b)(),n=e.match.params.lineUserId;return Object(a.useEffect)((function(){t({type:"SET_LINEUSERID",lineUserId:n})}),[n]),c.a.createElement("div",{className:"message-container"},c.a.createElement(j,null),c.a.createElement(R,null),c.a.createElement(X,null))},k=(n(104),function(){return c.a.createElement("div",{className:"order-container"},c.a.createElement("p",null,"\u3053\u3053\u306b\u306f\u30aa\u30fc\u30c0\u30fc\u60c5\u5831\u304c\u5165\u308a\u307e\u3059\u3002"))}),M=n(1),C=(n(105),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(l,null),c.a.createElement(o.a,null,c.a.createElement(M.a,{exact:!0,path:"/",component:_}),c.a.createElement(M.a,{path:"/messages/:lineUserId",component:_}),c.a.createElement(M.a,{path:"/orders",component:k})))}),A=(n(106),n(18)),D=n(52),w=n(6),G={messages:[],input:"",users:[],lineUserId:""},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGES":return Object(w.a)(Object(w.a)({},e),{},{messages:t.messages});case"ADD_MESSAGE":return Object(w.a)(Object(w.a)({},e),{},{messages:[].concat(Object(D.a)(e.messages),[t.message])});case"SET_USERS":return Object(w.a)(Object(w.a)({},e),{},{users:t.users});case"SET_LINEUSERID":return Object(w.a)(Object(w.a)({},e),{},{lineUserId:t.lineUserId});case"HANDLE_INPUT":return Object(w.a)(Object(w.a)({},e),{},{input:t.input});default:return e}},L=Object(A.b)(J);s.a.render(c.a.createElement(u.a,{store:L},c.a.createElement(C,null)),document.querySelector("#root"))},51:function(e,t,n){e.exports=n.p+"static/media/panda-right.0bfc58cc.png"},53:function(e,t,n){e.exports=n(107)},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},99:function(e,t){}},[[53,1,2]]]);
//# sourceMappingURL=main.b7d83c4e.chunk.js.map